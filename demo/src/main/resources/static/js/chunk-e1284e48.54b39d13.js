(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1284e48"],{"3bde":function(e,t,r){"use strict";var s=r("ff17"),o=r.n(s);o.a},ac89:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bigdiv"},[r("div",{staticClass:"maindiv"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"identity"}},[r("el-select",{staticClass:"elselectidentity",attrs:{placeholder:"请选择登录身份"},on:{change:e.currStationChange},model:{value:e.ruleForm.identity,callback:function(t){e.$set(e.ruleForm,"identity",t)},expression:"ruleForm.identity"}},[r("el-option",{attrs:{label:"学生",value:"student"}}),r("el-option",{attrs:{label:"教师",value:"teacher"}}),r("el-option",{attrs:{label:"访客",value:"guest"}})],1)],1),e.ch?e._e():r("el-form-item",{attrs:{prop:"sno"}},[r("el-input",{attrs:{placeholder:"studentusername",type:"text",clearable:""},model:{value:e.ruleForm.sno,callback:function(t){e.$set(e.ruleForm,"sno",t)},expression:"ruleForm.sno"}})],1),e.ch?r("el-form-item",{attrs:{prop:"teacher_phone"}},[r("el-input",{attrs:{placeholder:"teacherusername",type:"text",clearable:""},model:{value:e.ruleForm.teacher_phone,callback:function(t){e.$set(e.ruleForm,"teacher_phone",t)},expression:"ruleForm.teacher_phone"}})],1):e._e(),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"password",type:"password","show-password":""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{staticClass:"elformdiv1"},[r("el-row",{staticClass:"elimgcoderow1"},[r("el-input",{staticClass:"input-material",attrs:{type:"text",placeholder:"输入验证码"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),r("el-image",{staticClass:"elimage1",staticStyle:{padding:"0 10px"},attrs:{src:e.imgCode,id:"img-vcode",alt:"验证码"},on:{click:e.getCodeImage}})],1)],1),r("el-form-item",[r("el-button",{staticClass:"signinbutton",style:{background:""!=e.ruleForm.sno&&""!=e.ruleForm.password||""!=e.ruleForm.teacher_phone&&""!=e.ruleForm.password?"#445f59":"grey"},attrs:{disabled:(!e.ruleForm.sno||!e.ruleForm.password)&&(!e.ruleForm.teacher_phone||!e.ruleForm.password),type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1),r("el-row",{staticClass:"elrowschoolsong"},[r("el-col",[e._v(e._s(e.Signinpageschoolsong))]),r("el-col",[e._v(e._s(e.Signinpageschoolsong2))]),r("el-col",[e._v(e._s(e.Signinpageschoolsong3))]),r("el-col",[e._v(e._s(e.Signinpageschoolsong4))])],1)],1)],1)])},o=[],a=(r("96cf"),r("1da1")),n=r("bc3a"),i=r.n(n),l=r("56d7"),u=r("1c46"),c=r.n(u),m=i.a.create({baseURL:l["default"].url,timeout:1e3,headers:{"X-Custom-Header":"foobar"}}),g={name:"Signinpage",data:function(){return{ruleForm:{username:"",identity:"",sno:"",password:"",teacher_phone:""},rules:{identity:[{required:!0,message:"请先选择登录身份！",trigger:"change"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],sno:[{required:!0,message:"用户名不能为空！",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],password:[{required:!0,message:"密码不能为空！",trigger:"blur"},{min:8,max:50,message:"长度在 8 到 50 个字符",trigger:"blur"}]},ch:!1,response_ruleForm:{},Signinpageschoolsong:"大黑山高，黄海岸长，美丽的校园闪耀着理想之光。各族师生，意气昂扬，我们用勤劳和智慧点燃希望。立志修身，团结自强，在这片热土上蓬勃成长。",Signinpageschoolsong2:"啊，我可爱的民院，你的事业更加辉煌。",Signinpageschoolsong3:"春风化雨，书声琅琅，今日的桃李明日成参天栋梁。各族师生，放飞理想，我们用青春和赤诚描绘新篇章。为你自豪，为你增光，五十六族语",Signinpageschoolsong4:"言纵声歌唱。啊，我可爱的民院，你的事业更加辉煌。",imgCode:"",code:""}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("数据填写有误，请重新输入！"),!1;var r=t;i.a.get(l["default"].url+"/SigninIdentityCodeImage/"+t.code).then((function(e){1!=e.data?(r.$message.error("验证码错误"),r.code=null,r.getCodeImage()):(i.a.get(l["default"].url+"/statistics/addguestnumber").then((function(e){})),"guest"==r.ruleForm.identity?r.guestlogin():"student"==r.ruleForm.identity?r.studentlogin():"teacher"==r.ruleForm.identity?r.teacherlogin():r.$message.error("用户名或者密码错误或者身份类型不匹配！"))}))}))},studentlogin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,s,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=c.a.createHash("md5"),r.update(e.ruleForm.password),s=r.digest("hex"),e.ruleForm.password=s,t.next=6,m.post("/login",e.ruleForm);case 6:o=t.sent,a=o.data,a.state?(e.$message.success("登录成功"),localStorage.setItem("ruleForm",JSON.stringify(a.userDB)),sessionStorage.setItem("studentNo",JSON.stringify(a.studentNo)),e.response_ruleForm=a.userDB,sessionStorage.setItem("token",e.response_ruleForm),sessionStorage.setItem("isstudent","student"),location.href="/"):e.$message.error(a.msg);case 9:case"end":return t.stop()}}),t)})))()},teacherlogin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,s,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=c.a.createHash("md5"),r.update(e.ruleForm.password),s=r.digest("hex"),e.ruleForm.password=s,t.next=6,m.post("/teacherlogin",e.ruleForm);case 6:o=t.sent,a=o.data,a.state?(e.$message.success("登录成功"),localStorage.setItem("ruleForm",JSON.stringify(a.userDB1)),sessionStorage.setItem("teacherId",JSON.stringify(a.teacherId)),e.response_ruleForm=a.userDB1,sessionStorage.setItem("token",e.response_ruleForm),sessionStorage.setItem("isteacher","teacher"),location.href="/"):e.$message.error(a.msg);case 9:case"end":return t.stop()}}),t)})))()},guestlogin:function(){sessionStorage.setItem("isguest","guest"),location.href="/"},currStationChange:function(e){"guest"===e?(this.ruleForm.sno="guest",this.ruleForm.password="guestpassword"):"teacher"===e?(this.ch=!0,this.ruleForm.sno="",this.ruleForm.password=""):(this.ch=!1,this.ruleForm.teacher_phone="",this.ruleForm.password="")},getCodeImage:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.get("/getImage");case 2:r=t.sent,s=r.data,e.imgCode="data:image/png;base64,"+s;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.getCodeImage()}},d=g,p=(r("3bde"),r("2877")),h=Object(p["a"])(d,s,o,!1,null,"508362d0",null);t["default"]=h.exports},ff17:function(e,t,r){}}]);
//# sourceMappingURL=chunk-e1284e48.54b39d13.js.map